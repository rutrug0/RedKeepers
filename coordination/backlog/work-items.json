[
  {
    "id": "RK-HUMAN-0001-F03-F02",
    "title": "Integrate optional post-onboarding hero attach UX in dispatch flow",
    "description": "Expose an optional hero attach control and cooldown/readiness preview in dispatch UI after unlock while preserving a fully functional no-hero dispatch path.",
    "milestone": "M2",
    "type": "feature",
    "priority": "low",
    "owner_role": "frontend",
    "preferred_agent": null,
    "dependencies": [
      "RK-HUMAN-0001-F03"
    ],
    "inputs": [
      "docs/design/m2-hero-units-prototype-concept.md",
      "docs/design/world-map-v1-phasing.md",
      "client-web/hero-wireframes.html"
    ],
    "acceptance_criteria": [
      "Players can dispatch marches without selecting a hero and still complete core loop actions",
      "Hero attach UI appears only after unlock and presents clear cooldown/readiness states before commit",
      "Event/combat feedback surfaces show hero modifier deltas using shared event keys"
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T18:14:14.106079+00:00",
    "updated_at": "2026-02-26T18:14:19.347423+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "rowan-hale",
    "generated_from_item_id": "RK-HUMAN-0001-F03"
  },
  {
    "id": "RK-AUTO-BACKLOG-0004-F06",
    "title": "Add critical golden-path smoke for full first-slice loop including attack resolve",
    "description": "Add a release-blocking smoke path that verifies the full first-slice loop (tick, build, train, map interaction, hostile dispatch, deterministic combat resolve, event feed output) using scoped checks only.",
    "milestone": "M0",
    "type": "feature",
    "priority": "high",
    "owner_role": "qa",
    "preferred_agent": null,
    "dependencies": [
      "RK-AUTO-BACKLOG-0004-F01",
      "RK-AUTO-BACKLOG-0004-F02",
      "RK-AUTO-BACKLOG-0004-F05"
    ],
    "inputs": [
      "tests/",
      "tools/",
      "docs/design/vertical-slice-done-v1.md",
      "docs/design/first-vertical-slice.md"
    ],
    "acceptance_criteria": [
      "A single scoped smoke command validates first-slice loop prerequisites through hostile attack resolve and fails when required loop stages are missing.",
      "Smoke output records deterministic pass/fail evidence for each mandatory loop stage defined in vertical-slice done gate.",
      "Validation remains scoped to critical release path and avoids broad unrelated full-suite execution."
    ],
    "validation_commands": [
      "python tools/orchestrator.py status"
    ],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T19:16:22.546990+00:00",
    "updated_at": "2026-02-26T19:16:22.546990+00:00",
    "estimated_effort": "M",
    "token_budget": 11000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "mara-voss",
    "generated_from_item_id": "RK-AUTO-BACKLOG-0004"
  },
  {
    "id": "RK-AUTO-BACKLOG-0004-F01-F02",
    "title": "Add event template mappings for hostile attack flow keys in web placeholder feed",
    "description": "Add placeholder narrative templates and adapter mappings for `event.world.march_started`, `event.world.march_returned`, and `event.combat.placeholder_skirmish_*` so hostile attack events render text labels instead of missing-template fallbacks in the web shell.",
    "milestone": "M0",
    "type": "feature",
    "priority": "normal",
    "owner_role": "frontend",
    "preferred_agent": null,
    "dependencies": [
      "RK-AUTO-BACKLOG-0004-F01"
    ],
    "inputs": [],
    "acceptance_criteria": [
      "Client event feed renders human-readable placeholder text for all hostile attack event content keys emitted by backend transport.",
      "Template token substitution covers attack flow tokens (`army_name`, `origin_settlement_name`, `target_tile_label`, `settlement_name`, `haul_summary`).",
      "No regressions in existing scout/build/train event rendering behavior."
    ],
    "validation_commands": [],
    "status": "validating",
    "retry_count": 0,
    "created_at": "2026-02-26T19:27:21.718445+00:00",
    "updated_at": "2026-02-26T20:02:28.296514+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "ilya-fen",
    "generated_from_item_id": "RK-AUTO-BACKLOG-0004-F01",
    "assigned_agent": "sera-kest"
  },
  {
    "id": "RK-AUTO-BACKLOG-0004-F03-F01",
    "title": "Add explicit tie-fixture automation coverage for hostile settlement attack resolution",
    "description": "Add fixture-driven tests that assert tie classification (`attacker_strength == defender_strength`) maps to `combat_outcome=defender_win` and uses the documented tie loss ratios without variance.",
    "milestone": "M0",
    "type": "feature",
    "priority": "normal",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-AUTO-BACKLOG-0004-F03"
    ],
    "inputs": [
      "docs/design/m0-hostile-settlement-combat-fixtures.md",
      "backend/src/modules/world_map/application/world-map-hostile-attack-service.ts",
      "backend/src/modules/world_map/application/world-map-hostile-attack-service.test.ts"
    ],
    "acceptance_criteria": [
      "Automated tests include at least one tie fixture scenario with explicit expected losses",
      "Loss ratio assertions match fixture constants (`attacker: 1.00`, `defender: 0.20`) for tie",
      "No new combat mechanics or random variance are introduced"
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T19:30:15.095099+00:00",
    "updated_at": "2026-02-26T19:30:15.095099+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "rowan-hale",
    "generated_from_item_id": "RK-AUTO-BACKLOG-0004-F03"
  },
  {
    "id": "RK-AUTO-BACKLOG-0004-F02-F01",
    "title": "Add hostile dispatch action coverage to frontend visual smoke helper",
    "description": "Extend first-slice shell action smoke paths so automation selects the hostile marker and verifies the hostile dispatch flow produces backend-keyed lifecycle feedback (including combat resolution) in the event feed.",
    "milestone": "M0",
    "type": "feature",
    "priority": "normal",
    "owner_role": "frontend",
    "preferred_agent": null,
    "dependencies": [
      "RK-AUTO-BACKLOG-0004-F02"
    ],
    "inputs": [],
    "acceptance_criteria": [
      "tools/frontend_visual_smoke.py includes a first-slice action feedback path that triggers `[data-worldmap-adapter-action=\"attack\"]` after selecting the hostile marker",
      "Automated action feedback asserts at least one hostile dispatch completion key such as `event.combat.placeholder_skirmish_win` appears in the event feed after trigger",
      "tests/test_frontend_visual_smoke.py includes helper coverage for the added hostile action path configuration"
    ],
    "validation_commands": [
      "python -m unittest tests.test_frontend_visual_smoke",
      "python tools/frontend_visual_smoke.py --max-overflow-px 0 --max-diff-percent 0.5 --strict",
      "python tools/orchestrator.py status"
    ],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T19:46:06.573852+00:00",
    "updated_at": "2026-02-26T19:46:06.573852+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "sera-kest",
    "generated_from_item_id": "RK-AUTO-BACKLOG-0004-F02"
  },
  {
    "id": "RK-AUTO-BACKLOG-0004-F01-F01-F01",
    "title": "Unify deterministic terrain-passability source across world-map systems",
    "description": "Move hostile-attack impassable-tile evaluation from local hash rule to a shared world-map terrain resolver backed by a deterministic fixture/seed contract so movement/path checks and future map queries use one authoritative passability source.",
    "milestone": "M0",
    "type": "feature",
    "priority": "normal",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-AUTO-BACKLOG-0004-F01-F01"
    ],
    "inputs": [],
    "acceptance_criteria": [
      "A shared terrain passability resolver exists under world_map domain/application and is consumed by hostile attack path validation.",
      "Resolver behavior is deterministic for a given world_seed/map_size and can be fixture-driven for tests.",
      "Existing hostile attack acceptance and failure contracts remain unchanged (`max_active_marches_reached`, `path_blocked_impassable`)."
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T19:52:25.104071+00:00",
    "updated_at": "2026-02-26T19:52:25.104071+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "ilya-fen",
    "generated_from_item_id": "RK-AUTO-BACKLOG-0004-F01-F01"
  },
  {
    "id": "RK-AUTO-BACKLOG-0004-F04-F01",
    "title": "Map hostile dispatch error codes to specific narrative content keys in client feed rendering",
    "description": "Update hostile attack UI adapters to map `source_target_not_foreign`, `max_active_marches_reached`, `path_blocked_impassable`, and `march_already_exists` to the new `event.world.hostile_dispatch_failed_*` keys instead of only using the generic failure template.",
    "milestone": "M0",
    "type": "feature",
    "priority": "normal",
    "owner_role": "frontend",
    "preferred_agent": null,
    "dependencies": [
      "RK-AUTO-BACKLOG-0004-F04"
    ],
    "inputs": [
      "client-web/app.js",
      "backend/src/app/config/seeds/v1/narrative/event-feed-messages.json"
    ],
    "acceptance_criteria": [
      "Each hostile dispatch failure error_code resolves to a deterministic content key in the `event.world.hostile_dispatch_failed_*` namespace",
      "Event feed shows the mapped narrative copy with expected tokens per failure case",
      "Generic `event.world.hostile_dispatch_failed` remains as fallback for unknown error codes"
    ],
    "validation_commands": [
      "python tools/orchestrator.py status"
    ],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T19:58:29.119307+00:00",
    "updated_at": "2026-02-26T19:58:29.119307+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "nika-thorn",
    "generated_from_item_id": "RK-AUTO-BACKLOG-0004-F04"
  },
  {
    "id": "RK-AUTO-BACKLOG-0004-F04-F02",
    "title": "Adopt new hostile combat/retreat narrative keys in world-map hostile attack response payloads",
    "description": "Extend hostile attack service/event payload selection so combat and retreat states can emit the newly seeded `event.combat.hostile_*` and `event.world.hostile_*` keys while keeping existing keys backward-compatible.",
    "milestone": "M0",
    "type": "feature",
    "priority": "normal",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-AUTO-BACKLOG-0004-F04"
    ],
    "inputs": [
      "backend/src/modules/world_map/application/world-map-hostile-attack-service.ts",
      "backend/src/app/config/seeds/v1/narrative/event-feed-messages.json"
    ],
    "acceptance_criteria": [
      "Hostile attack resolved responses can emit at least one new `event.combat.hostile_*` key for combat outcomes",
      "Retreat/defeat responses emit a deterministic `event.world.hostile_*` post-combat key when applicable",
      "Existing keys (`event.world.march_started`, `event.world.march_returned`, `event.combat.placeholder_skirmish_*`) remain valid aliases during transition"
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T19:58:29.119307+00:00",
    "updated_at": "2026-02-26T19:58:29.119307+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "nika-thorn",
    "generated_from_item_id": "RK-AUTO-BACKLOG-0004-F04"
  }
]
