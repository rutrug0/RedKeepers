[
  {
    "id": "RK-M1-0006-F01-F01-F01",
    "title": "Add backend tests for v1 starter seed loader validation and first-slice filtering",
    "description": "Add focused tests for the new v1 seed loader utilities covering malformed shape errors, duplicate IDs/rows, missing cross-references, and first-slice filtering behavior using the committed seed JSON fixtures.",
    "milestone": "M1",
    "type": "feature",
    "priority": "low",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-M1-0006-F01-F01"
    ],
    "inputs": [
      "backend/src/app/config/seeds/v1/starter-seed-loaders.ts",
      "backend/src/modules/*/infra/seeds/v1/*.json",
      "backend/src/app/config/seeds/v1/*.json"
    ],
    "acceptance_criteria": [
      "Tests cover at least one malformed object shape failure with clear error message assertion",
      "Tests cover duplicate keyed IDs or duplicate row identity rejection",
      "Tests cover missing cross-reference rejection (e.g. producer_building_id or base_unit_id)",
      "Tests verify first-slice filtering excludes balance/data stubs and keeps cinder_throne_legates starter content by default"
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-25T16:00:57.781880+00:00",
    "updated_at": "2026-02-25T16:00:57.781880+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "ilya-fen",
    "generated_from_item_id": "RK-M1-0006-F01-F01"
  },
  {
    "id": "RK-M1-0007-F02-F01",
    "title": "Add typed backend loaders and validation helpers for v1 narrative seed tables",
    "description": "Implement framework-agnostic loader/parser utilities for the new narrative JSON tables and enforce the shared narrative row shape (required fields, unique keys per table, token list consistency with template placeholders) at startup or in tests.",
    "milestone": "M1",
    "type": "feature",
    "priority": "low",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-M1-0007-F02"
    ],
    "inputs": [
      "backend/src/app/config/seeds/v1/narrative/*.json",
      "backend/src/app/config/seeds/v1/narrative/narrative-template-table.schema.json"
    ],
    "acceptance_criteria": [
      "Backend exposes typed loaders/parsers for `civilization-intros.json`, `starter-settlement-name-pool.json`, and `event-feed-messages.json`",
      "Validation rejects missing required narrative fields (`key`, `slice_status_scope`, `categories`, `related_ids`, `template`, `tokens`) and duplicate row keys within a table",
      "Validation checks template token placeholders match the declared `tokens` array order/uniqueness",
      "No gameplay mechanics are added; work remains data loading/validation only"
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-25T16:09:20.320370+00:00",
    "updated_at": "2026-02-25T16:09:20.320370+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "ilya-fen",
    "generated_from_item_id": "RK-M1-0007-F02"
  },
  {
    "id": "RK-M1-0004-F01-F01-F01-ESC-F01",
    "title": "Add startup/model-policy compatibility preflight for Codex model access",
    "description": "Add an environment preflight that validates the configured model for the selected agent/escalation path against what the current ChatGPT account can access via Codex before queue execution begins.",
    "milestone": "M1",
    "type": "feature",
    "priority": "high",
    "owner_role": "qa",
    "preferred_agent": null,
    "dependencies": [
      "RK-M1-0004-F01-F01-F01-ESC"
    ],
    "inputs": [
      "tools/health_checks.py",
      "tools/orchestrator.py",
      "tools/codex_worker.py",
      "coordination/policies/model-policy.yaml"
    ],
    "acceptance_criteria": [
      "Startup/validation fails fast when a configured model is unsupported in the current account and emits the exact unsupported-model reason",
      "Preflight suggests remediation (policy update or explicitly configured fallback) instead of retrying repeatedly",
      "run-history and model-stats record model-requested/model-used/fallback fields for blocked runs"
    ],
    "validation_commands": [
      "python tools/orchestrator.py status"
    ],
    "status": "validating",
    "retry_count": 0,
    "created_at": "2026-02-25T17:58:54.201948+00:00",
    "updated_at": "2026-02-25T18:01:03.339230+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "mara-voss",
    "generated_from_item_id": "RK-M1-0004-F01-F01-F01-ESC",
    "assigned_agent": "tomas-grell"
  },
  {
    "id": "RK-M1-0004-F01-F01-F01-ESC-F02",
    "title": "Add regression test that guards model-policy and runtime selection against unsupported models",
    "description": "Add tests for `resolve_execution_profile` + model-policy contract so unsupported IDs are surfaced as a non-production-ready state, with explicit checks for escalation model path.",
    "milestone": "M1",
    "type": "feature",
    "priority": "normal",
    "owner_role": "qa",
    "preferred_agent": null,
    "dependencies": [
      "RK-M1-0004-F01-F01-F01-ESC"
    ],
    "inputs": [
      "tools/orchestrator.py",
      "tools/codex_worker.py",
      "coordination/policies/model-policy.yaml",
      "tests/test_model_routing.py",
      "tests/test_codex_preflight.py"
    ],
    "acceptance_criteria": [
      "Escalation path to `gpt-5.3-codex-spark` is asserted when policy currently specifies it and can be flagged by contract smoke test",
      "At least one test asserts that unsupported `model_requested` produces a deterministic block/fail summary before execution",
      "Tests cover both standard and `escalation_upgrade` model selection paths"
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-25T17:58:54.202452+00:00",
    "updated_at": "2026-02-25T17:58:54.202452+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "mara-voss",
    "generated_from_item_id": "RK-M1-0004-F01-F01-F01-ESC"
  }
]
