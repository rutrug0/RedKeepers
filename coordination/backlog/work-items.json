[
  {
    "id": "RK-HUMAN-0001-F03-F01",
    "title": "Implement M2 dispatch validation and hero attachment lifecycle for marches",
    "description": "Add post-slice dispatch validation for optional `hero_id`, enforce one-hero-per-march and single-active-assignment constraints, and persist deterministic attach/detach transitions across march start and return.",
    "milestone": "M2",
    "type": "feature",
    "priority": "normal",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-HUMAN-0001-F03"
    ],
    "inputs": [
      "docs/design/world-map-v1-phasing.md",
      "docs/design/m2-hero-units-prototype-concept.md",
      "docs/design/m2-hero-runtime-schema-and-resolver-hook-plan.md",
      "backend/src/modules/world_map",
      "backend/src/modules/heroes"
    ],
    "acceptance_criteria": [
      "Dispatch rejects invalid hero attachment with stable error codes (`feature_not_in_slice`, `hero_unavailable`, `hero_already_assigned`, `hero_target_scope_mismatch`)",
      "A march can carry at most one hero attachment and hero detach occurs deterministically on return completion",
      "No hero-specific combat/scout branches are introduced in resolvers"
    ],
    "validation_commands": [],
    "status": "validating",
    "retry_count": 0,
    "created_at": "2026-02-26T18:14:14.106079+00:00",
    "updated_at": "2026-02-26T18:50:15.733760+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "rowan-hale",
    "generated_from_item_id": "RK-HUMAN-0001-F03",
    "assigned_agent": "ilya-fen"
  },
  {
    "id": "RK-HUMAN-0001-F03-F02",
    "title": "Integrate optional post-onboarding hero attach UX in dispatch flow",
    "description": "Expose an optional hero attach control and cooldown/readiness preview in dispatch UI after unlock while preserving a fully functional no-hero dispatch path.",
    "milestone": "M2",
    "type": "feature",
    "priority": "low",
    "owner_role": "frontend",
    "preferred_agent": null,
    "dependencies": [
      "RK-HUMAN-0001-F03"
    ],
    "inputs": [
      "docs/design/m2-hero-units-prototype-concept.md",
      "docs/design/world-map-v1-phasing.md",
      "client-web/hero-wireframes.html"
    ],
    "acceptance_criteria": [
      "Players can dispatch marches without selecting a hero and still complete core loop actions",
      "Hero attach UI appears only after unlock and presents clear cooldown/readiness states before commit",
      "Event/combat feedback surfaces show hero modifier deltas using shared event keys"
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T18:14:14.106079+00:00",
    "updated_at": "2026-02-26T18:14:19.347423+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "rowan-hale",
    "generated_from_item_id": "RK-HUMAN-0001-F03"
  },
  {
    "id": "RK-HUMAN-0001-F01-F01",
    "title": "Wire world lifecycle scheduler into backend runtime hook and transport surface",
    "description": "Integrate the new world lifecycle scheduler with an app lifecycle hook or transport route so operators/UI can advance world lifecycle ticks and consume emitted lifecycle events/archive summaries without direct module invocation.",
    "milestone": "M1",
    "type": "feature",
    "priority": "normal",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-HUMAN-0001-F01"
    ],
    "inputs": [],
    "acceptance_criteria": [
      "A backend runtime path invokes the lifecycle scheduler for a target world using deterministic observed-at timestamps.",
      "Lifecycle transition events and latest archive summary are exposed through a stable contract response for UI/ops use.",
      "No additional post-slice mechanics are introduced beyond open/lock/archive/reset scheduling and rollover state reset."
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T18:21:09.093683+00:00",
    "updated_at": "2026-02-26T18:21:09.093683+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "ilya-fen",
    "generated_from_item_id": "RK-HUMAN-0001-F01"
  },
  {
    "id": "RK-HUMAN-0001-F04-F01",
    "title": "Expose neutral gathering and ambush resolution through backend transport route",
    "description": "Wire `DeterministicWorldMapNeutralGatheringService` into a transport-facing world-map route so clients can dispatch gather marches and poll deterministic resolution payloads/events without direct module invocation.",
    "milestone": "M2",
    "type": "feature",
    "priority": "normal",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-HUMAN-0001-F04"
    ],
    "inputs": [],
    "acceptance_criteria": [
      "Transport exposes a stable gather command contract that starts gather marches against seeded neutral nodes.",
      "Transport exposes a deterministic gather resolution/poll contract returning gather and ambush event payloads.",
      "Failures for unknown/depleted nodes and duplicate march IDs return stable error codes."
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T18:34:09.314474+00:00",
    "updated_at": "2026-02-26T18:34:09.314474+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "ilya-fen",
    "generated_from_item_id": "RK-HUMAN-0001-F04"
  },
  {
    "id": "RK-HUMAN-0001-F04-F02",
    "title": "Apply resolved gather haul outputs to settlement resource projection",
    "description": "Integrate resolved `gathered_yield` outputs with economy resource ledgers so successful gather marches materialize into settlement stock changes and intercepted marches respect reduced haul totals.",
    "milestone": "M2",
    "type": "feature",
    "priority": "normal",
    "owner_role": "backend",
    "preferred_agent": null,
    "dependencies": [
      "RK-HUMAN-0001-F04"
    ],
    "inputs": [],
    "acceptance_criteria": [
      "Gather resolution writes resource deltas into the same settlement stock model used by tick/build/train flows.",
      "Ambush-intercepted outcomes apply deterministic reduced or zeroed haul based on service config.",
      "Event payloads and resulting resource ledger deltas remain deterministic for identical seeds and inputs."
    ],
    "validation_commands": [],
    "status": "queued",
    "retry_count": 0,
    "created_at": "2026-02-26T18:34:09.314474+00:00",
    "updated_at": "2026-02-26T18:34:09.314474+00:00",
    "estimated_effort": "S",
    "token_budget": 8000,
    "result_summary": null,
    "blocker_reason": null,
    "escalation_target": "Mara Voss",
    "generated_by_agent": "ilya-fen",
    "generated_from_item_id": "RK-HUMAN-0001-F04"
  }
]
