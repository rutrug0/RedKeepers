[
  {
    "timestamp_utc": "2026-02-25T13:24:41.223162+00:00",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M1-0003",
    "status": "done",
    "summary": "Drafted v1 civilization concepts with 3 original civilizations, asymmetric mechanics, signature unit identities, and explicit onboarding/complexity moderation rationale.",
    "changed_files": [
      "docs/design/factions-and-civilizations.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": []
  },
  {
    "timestamp_utc": "2026-02-25T15:06:34.7403828Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M1-0006",
    "status": "done",
    "summary": "Defined v1 starter economy/building/unit data tables with normalized stats/timings, civ modifier overlays, and slice-safe activation flags plus backend/frontend field annotations.",
    "changed_files": [
      "docs/design/v1-starter-data-tables.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Serialize v1 starter tables into backend seed config format",
        "owner_role": "backend",
        "milestone": "M1",
        "priority": "high",
        "description": "Convert the markdown starter tables into machine-readable seed/config data for `economy`, `buildings`, and `units` modules without changing values or adding mechanics.",
        "dependencies": [
          "RK-M1-0006"
        ],
        "inputs": [
          "docs/design/v1-starter-data-tables.md",
          "docs/architecture/backend-modular-monolith.md"
        ],
        "acceptance_criteria": [
          "Machine-readable seed/config files exist for resource definitions, building lines/effects, unit lines, civ modifiers, and unit variants",
          "Config keys match the stable IDs in docs/design/v1-starter-data-tables.md",
          "First-slice enable list supports only cinder_throne_legates and hides balance/data stubs by default"
        ],
        "validation_commands": []
      },
      {
        "title": "Run early progression pacing simulation on starter economy and training values",
        "owner_role": "design",
        "milestone": "M1",
        "priority": "medium",
        "description": "Validate the first 2-6 hours of settlement progression using the new starter tables (resource income, build cadence, unit training cadence) and propose numeric adjustments if bottlenecks feel too hard/soft.",
        "dependencies": [
          "RK-M1-0006"
        ],
        "inputs": [
          "docs/design/v1-starter-data-tables.md",
          "docs/design/first-vertical-slice.md"
        ],
        "acceptance_criteria": [
          "Documented pacing checkpoints for at least 30m, 2h, and 6h progression windows",
          "At least one recommended tuning pass is proposed or current values are explicitly approved",
          "Recommendations preserve first-slice complexity caps and stat-driven asymmetry approach"
        ],
        "validation_commands": []
      },
      {
        "title": "Define post-slice storage and defense building activation package",
        "owner_role": "design",
        "milestone": "M2",
        "priority": "medium",
        "description": "Add the next building lines (storage/warehouse and defense support lines) and activation thresholds so the economy can move beyond flat base storage caps after the first playable slice.",
        "dependencies": [
          "RK-M1-0006"
        ],
        "inputs": [
          "docs/design/v1-starter-data-tables.md",
          "docs/design/first-vertical-slice.md"
        ],
        "acceptance_criteria": [
          "Storage and defense line additions are expressed as data-table rows and effects, not bespoke mechanics",
          "First-slice playable subset remains unchanged and clearly flagged",
          "Updated values include backend/frontend field annotations matching existing table conventions"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-25T15:38:57.2879408Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M1-0006-F02",
    "status": "done",
    "summary": "Ran a 30m/2h/6h early progression pacing simulation against starter economy/build/training tables, documented a severe early refill dead-zone (pre-barracks), and proposed a numeric-only Pass A tuning set to improve onboarding cadence without adding mechanics.",
    "changed_files": [
      "docs/design/v1-early-progression-pacing-sim.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Re-validate rally/stone pacing after starter Pass A tuning is serialized",
        "owner_role": "design",
        "milestone": "M1",
        "priority": "medium",
        "description": "After backend seed/config data is updated with the approved starter tuning pass, rerun the 30m/2h/6h pacing simulation to confirm barracks timing improvement holds and determine whether rally_post/stone timing still needs a narrow follow-up adjustment.",
        "dependencies": [
          "RK-M1-0006-F02"
        ],
        "inputs": [
          "docs/design/v1-early-progression-pacing-sim.md",
          "docs/design/v1-starter-data-tables.md"
        ],
        "acceptance_criteria": [
          "Updated pacing checkpoints are documented for 30m, 2h, and 6h using serialized seed values",
          "Barracks unlock and first unit training cadence are explicitly verified against the tuned target",
          "Rally_post timing is either approved or a small stone/rally-only tuning pass is proposed"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-25T15:43:12.2916888Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M1-0006-F03",
    "status": "done",
    "summary": "Added post-slice storage and defense activation package data to the v1 starter tables: granary/warehouse/watchtower/guardhouse lines, storage/defense support effects, and M2 reveal/unlock threshold rows while keeping the first-slice enable set unchanged.",
    "changed_files": [
      "docs/design/v1-starter-data-tables.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Implement post-slice building activation threshold evaluation for storage/defense package",
        "owner_role": "backend",
        "milestone": "M2",
        "priority": "medium",
        "description": "Add seed/config support and runtime evaluation for `buildings.building_activation_thresholds` (including AND semantics per building + threshold phase) so `granary`, `warehouse`, `palisade`, `watchtower`, and `guardhouse` can be revealed/unlocked from data-defined thresholds.",
        "dependencies": [
          "RK-M1-0006-F03"
        ],
        "inputs": [
          "docs/design/v1-starter-data-tables.md"
        ],
        "acceptance_criteria": [
          "Backend seed/config schema supports `building_activation_thresholds` rows and preserves all fields/IDs from the design table",
          "Threshold evaluation supports `resource_stock_ratio`, `resource_stock_ratio_any`, and `building_level_min` with `gte` operation",
          "Rows for the same `building_id` and `threshold_phase` are evaluated with AND semantics as documented",
          "First-slice behavior remains unchanged when `data_stub_post_slice` rows are not enabled"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-25T19:27:48.5624646Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M1-0006-F02-F01",
    "status": "done",
    "summary": "Re-ran the 30m/2h/6h pacing simulation directly from serialized starter seed JSON values and confirmed the run still matches pre-pass-A pacing: barracks and first training are both far past the 2h target window and rally_post is not reached by 6h.",
    "changed_files": [
      "docs/design/v1-early-progression-pacing-sim.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [
      "Approved Pass A starter tuning values are not yet reflected in serialized backend seed/config files, so post-pass-A pacing cannot be validated on live serialized values."
    ],
    "proposed_work_items": [
      {
        "title": "Apply approved Pass A starter tuning values into serialized backend seed config",
        "owner_role": "backend",
        "milestone": "M1",
        "priority": "high",
        "description": "Update serialized v1 starter seed JSON values to match the approved Pass A tuning set already documented in `docs/design/v1-early-progression-pacing-sim.md` (starting stock, base passive income, early producer cost multipliers, and barracks/rally food+wood costs).",
        "dependencies": [
          "RK-M1-0006-F02"
        ],
        "inputs": [
          "docs/design/v1-early-progression-pacing-sim.md",
          "backend/src/modules/economy/infra/seeds/v1/resource-definitions.json",
          "backend/src/modules/buildings/infra/seeds/v1/building-lines.json"
        ],
        "acceptance_criteria": [
          "Serialized resource and building seed values match the approved Pass A numbers from the design doc",
          "Seed loader tests continue passing after value updates",
          "No new mechanics are introduced and first-slice enablement remains unchanged"
        ],
        "validation_commands": []
      },
      {
        "title": "Run post-serialization rally/stone micro-pass validation after Pass A is landed",
        "owner_role": "design",
        "milestone": "M1",
        "priority": "medium",
        "description": "After Pass A is serialized, rerun the 30m/2h/6h reference simulation and validate whether rally_post timing can be approved or needs a narrow rally/stone-only numeric tweak.",
        "dependencies": [
          "RK-M1-0006-F02-F01"
        ],
        "inputs": [
          "docs/design/v1-early-progression-pacing-sim.md",
          "backend/src/modules/economy/infra/seeds/v1/resource-definitions.json",
          "backend/src/modules/buildings/infra/seeds/v1/building-lines.json"
        ],
        "acceptance_criteria": [
          "Checkpoint/resource tables for 30m, 2h, and 6h are refreshed from serialized values",
          "Barracks timing and first training cadence are explicitly checked against tuned targets",
          "Rally_post timing is either approved or a narrow rally/stone-only delta is documented with explicit numeric values"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-25T20:30:00.0000000Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M1-0006-F02-F01-F02",
    "status": "done",
    "summary": "Re-ran 30m/2h/6h post-Pass A serialized pacing and completed the rally/stone micro-pass review; barracks and first training are within target pacing, but rally_post still misses the 6h window.",
    "changed_files": [
      "docs/design/v1-early-progression-pacing-sim.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Apply micro-pass rally cost delta and re-run RK-M1-0006-F02-F01-F02",
        "owner_role": "backend",
        "milestone": "M1",
        "priority": "medium",
        "description": "Apply narrow rally_post-only cost deltas and rerun the 30m/2h/6h reference simulation to validate rally_post reaches L1 by 6h.",
        "dependencies": [
          "RK-M1-0006-F02-F01-F02"
        ],
        "inputs": [
          "docs/design/v1-early-progression-pacing-sim.md",
          "backend/src/modules/economy/infra/seeds/v1/resource-definitions.json",
          "backend/src/modules/buildings/infra/seeds/v1/building-lines.json"
        ],
        "acceptance_criteria": [
          "rally_post cost values updated to `rally_post.cost_food_l1: 64 -> 55`, `rally_post.cost_wood_l1: 64 -> 33`, and `rally_post.cost_stone_l1: 52 -> 52`",
          "30m/2h/6h checkpoint tables are refreshed after the micro candidate is applied",
          "Rally_post reaches L1 by or before 6h in the re-run"
        ]
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-25T19:50:00.0000000Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M0-0009",
    "status": "done",
    "summary": "Added a stable one-flow map scout/select contract with three tile states, three interaction outcomes, and explicit placeholder event-feed key mapping for frontend integration.",
    "changed_files": [
      "docs/design/map-scout-interaction-contract.md"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Implement `world_map.scout_select_v1` endpoint and DTO contract",
        "owner_role": "backend",
        "milestone": "M0",
        "priority": "high",
        "description": "Wire an API handler for `POST /world-map/tiles/{tileId}/interact` that emits one of the contract outcomes and returns a single `event.world.*` content key payload.",
        "dependencies": [
          "RK-M0-0009"
        ],
        "inputs": [
          "docs/design/map-scout-interaction-contract.md",
          "backend/src/modules/world_map"
        ],
        "acceptance_criteria": [
          "Response payload includes `flow`, `tile_id`, `tile_state`, `interaction_outcome`, and `event.content_key`",
          "Only the three contract outcome codes are returned in M0",
          "Tile state transitions stay limited to unknown/quiet/hostile_hint values"
        ],
        "validation_commands": [
          "python tools/orchestrator.py status"
        ]
      },
      {
        "title": "Add placeholder map tile seeds and event-token fixtures for the scout-select flow",
        "owner_role": "backend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Create minimal static tile seed rows for unknown/quiet/hostile_hint states and token fixtures for `target_tile_label` and `hostile_force_estimate` on scout outcomes.",
        "dependencies": [
          "RK-M0-0009"
        ],
        "inputs": [
          "docs/design/map-scout-interaction-contract.md",
          "backend/src/app/config/seeds"
        ],
        "acceptance_criteria": [
          "Seed data can produce all three scout outcomes in a deterministic dev fixture setup",
          "Fixture event tokens are placeholder-only and do not introduce new mechanics",
          "No additional map interaction flow is introduced beyond scout/select"
        ],
        "validation_commands": []
      }
    ]
  }
  ,
  {
    "timestamp_utc": "2026-02-25T20:20:31.014421+00:00",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-M0-0014",
    "status": "done",
    "summary": "Published a first-slice 15m/30m/60m progression target matrix with pass/fail bounds for resource stabilization, first L2 upgrade, first unit training, and scout interaction.",
    "changed_files": [
      "docs/design/first-slice-progression-target-matrix.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Add M0 smoke assertions for first-slice progression targets",
        "owner_role": "qa",
        "milestone": "M0",
        "priority": "medium",
        "description": "Add a deterministic smoke check that evaluates 15m/30m/60m snapshot bounds from RK-M0-0014 and fails when matrix thresholds are not met.",
        "acceptance_criteria": [
          "A single smoke check reads settlement and event-scout snapshots at >=15m, >=30m, and >=60m",
          "The run asserts matrix bounds for resource caps/ranges, first L2 upgrade window, first unit completion by <=60m, and at least one valid scout outcome",
          "Test output clearly marks which matrix row failed and emits pass/fail in CI-readable form"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-26T11:42:17.6225896Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0003-F01",
    "status": "done",
    "summary": "Produced a post-slice (M2) hero unit prototype concept with explicit queue gate (blocked until vertical slice sign-off), minimum onboarding/tutorial impact, and required UI surface changes while keeping M0/M1 implementation deferred.",
    "changed_files": [
      "docs/design/m2-hero-units-prototype-concept.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Finalize M2 hero definitions and shared ability modifier table",
        "owner_role": "design",
        "milestone": "M2",
        "priority": "medium",
        "description": "Convert the deferred hero concept into data-table ready definitions (hero IDs, unlock gate, active ability effects, cooldown targets) without introducing bespoke mechanics.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0003-F01",
          "Vertical Slice Done v1 PASS"
        ],
        "inputs": [
          "docs/design/m2-hero-units-prototype-concept.md",
          "docs/design/v1-starter-data-tables.md",
          "docs/design/vertical-slice-done-v1.md"
        ],
        "acceptance_criteria": [
          "Hero definitions are expressed as IDs and numeric modifiers compatible with existing stat-driven model",
          "Exactly one active ability per civilization hero is defined for prototype scope",
          "Unlock gate is post-onboarding and does not alter first-slice tutorial flow"
        ],
        "validation_commands": []
      },
      {
        "title": "Design hero UI wireframes for assignment, ability use, and cooldown feedback",
        "owner_role": "frontend",
        "milestone": "M2",
        "priority": "medium",
        "description": "Create placeholder-first wireframes for hero roster card, army dispatch ability slot, and event/combat feedback surfaces defined in the concept doc.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0003-F01",
          "Vertical Slice Done v1 PASS"
        ],
        "inputs": [
          "docs/design/m2-hero-units-prototype-concept.md",
          "docs/design/ui-style-guide.md"
        ],
        "acceptance_criteria": [
          "Wireframes cover settlement hero card, dispatch modal controls, and feedback/event states",
          "Cooldown readability and effect clarity are visible before action commit",
          "All visuals remain placeholder/wireframe quality and avoid final art dependencies"
        ],
        "validation_commands": []
      },
      {
        "title": "Plan backend hero runtime schema and combat hook integration",
        "owner_role": "backend",
        "milestone": "M2",
        "priority": "medium",
        "description": "Prepare schema and resolver plan for hero assignment state, active ability cooldowns, and combat/scout modifier application using existing action-resolution flow.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0003-F01",
          "Vertical Slice Done v1 PASS"
        ],
        "inputs": [
          "docs/design/m2-hero-units-prototype-concept.md",
          "backend/src/modules"
        ],
        "acceptance_criteria": [
          "Schema plan includes hero readiness/cooldown state and assignment linkage to army context",
          "Ability effects apply through shared numeric modifier pipeline rather than bespoke combat paths",
          "Event keys for assignment/activation/cooldown completion are defined for client consumption"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-26T12:06:59.379095+00:00",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0003-F01-F01",
    "status": "done",
    "summary": "Finalized M2 hero prototype definitions into data-table-ready rows: shared post-onboarding unlock gate, shared numeric ability modifier templates, and one active ability per civilization hero with cooldowns.",
    "changed_files": [
      "docs/design/m2-hero-units-prototype-concept.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Implement M2 hero seed tables and validators from finalized definitions",
        "owner_role": "backend",
        "milestone": "M2",
        "priority": "medium",
        "description": "Create seed/config tables for `heroes.unlock_gates_v1`, `heroes.ability_modifiers_v1`, `heroes.hero_definitions_v1`, and `heroes.active_abilities_v1` using the finalized IDs and numeric values.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0003-F01-F01",
          "Vertical Slice Done v1 PASS"
        ],
        "inputs": [
          "docs/design/m2-hero-units-prototype-concept.md",
          "backend/src/modules"
        ],
        "acceptance_criteria": [
          "All hero/ability/modifier IDs from design are represented in machine-readable seed/config format",
          "Cooldown and modifier fields are numeric and validated by schema checks",
          "No bespoke hero-only mechanics are introduced outside shared modifier pipeline"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-26T18:13:38.6218091Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-HUMAN-0001-F03",
    "status": "done",
    "summary": "Defined a deferred M2 hero-to-march attachment path with deterministic assignment lifecycle, dispatch validation rules, cooldown activation hooks, and explicit shared-modifier-only combat integration while keeping onboarding optional and outside first-session critical flow.",
    "changed_files": [
      "docs/design/m2-hero-units-prototype-concept.md",
      "docs/design/world-map-v1-phasing.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Implement M2 dispatch validation and hero attachment lifecycle for marches",
        "owner_role": "backend",
        "milestone": "M2",
        "priority": "medium",
        "description": "Add post-slice dispatch validation for optional `hero_id`, enforce one-hero-per-march and single-active-assignment constraints, and persist deterministic attach/detach transitions across march start and return.",
        "dependencies": [
          "RK-HUMAN-0001-F03",
          "Vertical Slice Done v1 PASS"
        ],
        "inputs": [
          "docs/design/world-map-v1-phasing.md",
          "docs/design/m2-hero-units-prototype-concept.md",
          "docs/design/m2-hero-runtime-schema-and-resolver-hook-plan.md",
          "backend/src/modules/world_map",
          "backend/src/modules/heroes"
        ],
        "acceptance_criteria": [
          "Dispatch rejects invalid hero attachment with stable error codes (`feature_not_in_slice`, `hero_unavailable`, `hero_already_assigned`, `hero_target_scope_mismatch`)",
          "A march can carry at most one hero attachment and hero detach occurs deterministically on return completion",
          "No hero-specific combat/scout branches are introduced in resolvers"
        ],
        "validation_commands": []
      },
      {
        "title": "Integrate optional post-onboarding hero attach UX in dispatch flow",
        "owner_role": "frontend",
        "milestone": "M2",
        "priority": "low",
        "description": "Expose an optional hero attach control and cooldown/readiness preview in dispatch UI after unlock while preserving a fully functional no-hero dispatch path.",
        "dependencies": [
          "RK-HUMAN-0001-F03",
          "Vertical Slice Done v1 PASS"
        ],
        "inputs": [
          "docs/design/m2-hero-units-prototype-concept.md",
          "docs/design/world-map-v1-phasing.md",
          "client-web/hero-wireframes.html"
        ],
        "acceptance_criteria": [
          "Players can dispatch marches without selecting a hero and still complete core loop actions",
          "Hero attach UI appears only after unlock and presents clear cooldown/readiness states before commit",
          "Event/combat feedback surfaces show hero modifier deltas using shared event keys"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-26T19:28:53.9276973Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0004-F03",
    "status": "done",
    "summary": "Finalized first-slice deterministic hostile-settlement combat fixture constants (win/loss/tie comparison classes with stable loss ratios), added one required foreign settlement profile, and linked world-map phasing to the fixture source doc.",
    "changed_files": [
      "docs/design/m0-hostile-settlement-combat-fixtures.md",
      "docs/design/world-map-v1-phasing.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Add explicit tie-fixture automation coverage for hostile settlement attack resolution",
        "owner_role": "backend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Add fixture-driven tests that assert tie classification (`attacker_strength == defender_strength`) maps to `combat_outcome=defender_win` and uses the documented tie loss ratios without variance.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0004-F03"
        ],
        "inputs": [
          "docs/design/m0-hostile-settlement-combat-fixtures.md",
          "backend/src/modules/world_map/application/world-map-hostile-attack-service.ts",
          "backend/src/modules/world_map/application/world-map-hostile-attack-service.test.ts"
        ],
        "acceptance_criteria": [
          "Automated tests include at least one tie fixture scenario with explicit expected losses",
          "Loss ratio assertions match fixture constants (`attacker: 1.00`, `defender: 0.20`) for tie",
          "No new combat mechanics or random variance are introduced"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-26T21:02:25.0000000Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0005-F02",
    "status": "done",
    "summary": "Published a single first-slice playable manifest lock with canonical IDs for one civ profile, one primary settlement, one hostile fixture profile, and capped playable resource/building/unit sets, plus explicit stub_post_slice exclusions and reasons for default first-session flows.",
    "changed_files": [
      "backend/src/app/config/seeds/v1/first-slice-playable-manifest.json",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Validate first-slice runtime seeds against playable manifest lock",
        "owner_role": "backend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Add a startup/CI validation step that cross-checks active first-slice seeds and default transport fixtures against `first-slice-playable-manifest.json` (IDs and caps) to prevent accidental scope drift.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0005-F02"
        ],
        "inputs": [
          "backend/src/app/config/seeds/v1/first-slice-playable-manifest.json",
          "backend/src/app/config/seeds/v1/first-slice-enablement.json",
          "backend/src/app/config/seeds/v1/world-map-tile-seed-fixtures.json"
        ],
        "acceptance_criteria": [
          "Validation fails if enabled civ/resource/building/unit IDs diverge from `canonical_playable_now` in the manifest",
          "Validation fails if default primary settlement or hostile fixture IDs diverge from manifest lock values",
          "CI output reports exact mismatched IDs to support quick correction without bespoke migration logic"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-27T10:17:50.0773497Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0007-F03",
    "status": "done",
    "summary": "Published a first-slice canonical event token contract matrix for tick/build/train/scout/hostile loops, including required token sets per key, explicit legacy alias-to-canonical mapping, and explicit post-slice exclusion from required default rendering coverage.",
    "changed_files": [
      "docs/design/first-slice-event-token-contract-matrix.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Add contract validation for first-slice canonical event key/token matrix",
        "owner_role": "backend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Add a startup/CI validator that cross-checks `loop_required_keys`, `legacy_alias_mapping`, and `deferred_post_slice_keys` in `first-slice-content-key-manifest.json` against `event-feed-messages.json` token rows so canonical rendering contracts cannot drift silently.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0007-F03"
        ],
        "inputs": [
          "docs/design/first-slice-event-token-contract-matrix.md",
          "backend/src/app/config/seeds/v1/narrative/first-slice-content-key-manifest.json",
          "backend/src/app/config/seeds/v1/narrative/event-feed-messages.json"
        ],
        "acceptance_criteria": [
          "Validation fails if any `loop_required_keys` canonical key has no narrative row",
          "Validation fails if any mapped `legacy_alias_mapping` key is also selected as a direct default rendering key",
          "Validation fails if a deferred post-slice key appears in default first-slice include list",
          "Failure output identifies exact offending key names for quick correction"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-27T11:44:07.882674+00:00",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0008-F01",
    "status": "done",
    "summary": "Published a machine-readable first-slice hostile runtime token contract artifact covering canonical dispatch/arrive/resolve/post-battle keys with required token fields, compatibility alias expectations, and explicit hero/gather/ambush post-slice exclusions.",
    "changed_files": [
      "backend/src/app/config/seeds/v1/narrative/first-slice-hostile-runtime-token-contract.json",
      "backend/src/app/config/seeds/v1/narrative/README.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Add CI validation for first-slice hostile runtime token contract drift",
        "owner_role": "backend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Add a validator that cross-checks canonical hostile keys, required tokens, alias mappings, and deferred exclusions in `first-slice-hostile-runtime-token-contract.json` against `first-slice-content-key-manifest.json` and `event-feed-messages.json` so dispatch/arrive/resolve/post-battle payload contracts stay locked.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0008-F01"
        ],
        "inputs": [
          "backend/src/app/config/seeds/v1/narrative/first-slice-hostile-runtime-token-contract.json",
          "backend/src/app/config/seeds/v1/narrative/first-slice-content-key-manifest.json",
          "backend/src/app/config/seeds/v1/narrative/event-feed-messages.json"
        ],
        "acceptance_criteria": [
          "Validation fails if any hostile canonical key in the contract is missing from manifest loop required keys or event feed seed rows",
          "Validation fails if any declared compatibility alias key is selected as a direct default canonical key",
          "Validation fails if any deferred hero/gather/ambush key appears in hostile contract required runtime keys",
          "Failure output includes key-level mismatch details for fast correction"
        ],
        "validation_commands": [
          "python tools/orchestrator.py status"
        ]
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-27T12:17:42.9994554Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0009-F01",
    "status": "done",
    "summary": "Extended the first-slice event token contract doc with one canonical namespace migration matrix spanning tick/build/train/scout/hostile keys, explicitly tagging each runtime key as canonical-default or compatibility-only and locking alias rows out of default rendering paths.",
    "changed_files": [
      "docs/design/first-slice-event-token-contract-matrix.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Enforce canonical-default preference in event feed key resolver",
        "owner_role": "frontend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Update the event key resolution path to consume `migration_key_status` semantics so default rendering uses only canonical-default keys and compatibility-only aliases are accepted only as fallback lookup inputs.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0009-F01"
        ],
        "inputs": [
          "docs/design/first-slice-event-token-contract-matrix.md",
          "backend/src/app/config/seeds/v1/narrative/first-slice-content-key-manifest.json",
          "client-web/src"
        ],
        "acceptance_criteria": [
          "Direct default rendering selection ignores all keys tagged compatibility-only",
          "Alias payloads resolve deterministically to their canonical-default key for rendering",
          "Resolver tests cover at least one alias case in each flow: tick, build, train, scout, hostile_dispatch_and_resolve"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-27T13:07:10.3213115Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0010-F01",
    "status": "done",
    "summary": "Defined one canonical first-session objective sequence contract (`tick/build/train/scout/attack/resolve`) with stable objective IDs, canonical-default key mappings, required runtime tokens per step, and explicit exclusion of hero/ambush/gather branches from required objective completion coverage.",
    "changed_files": [
      "docs/design/first-slice-event-token-contract-matrix.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Wire first-session objective tracker to canonical objective IDs and key gates",
        "owner_role": "frontend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Implement first-session objective progress tracking using the six contract IDs and canonical key gates so UI progression state advances only on the documented `tick/build/train/scout/attack/resolve` event sequence.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0010-F01"
        ],
        "inputs": [
          "docs/design/first-slice-event-token-contract-matrix.md",
          "backend/src/app/config/seeds/v1/narrative/first-slice-content-key-manifest.json",
          "client-web/src"
        ],
        "acceptance_criteria": [
          "Objective tracker uses the exact six stable objective IDs from the design contract",
          "Progression gates use canonical-default key names only, with compatibility aliases resolved upstream",
          "Deferred hero/ambush/gather keys do not advance first-session objective completion"
        ],
        "validation_commands": []
      }
    ]
  },
  {
    "timestamp_utc": "2026-02-27T13:50:57.9771612Z",
    "agent_id": "rowan-hale",
    "work_item_id": "RK-AUTO-BACKLOG-0011-F01",
    "status": "done",
    "summary": "Locked a snapshot-ready first-session objective gate schema in the first-slice token matrix with six canonical objective keys (`tick/build/train/scout/attack/resolve`), explicit `required_all`/optional `required_any` canonical gate keys, compatibility-alias lookup policy, canonical-only gate guidance, preserved negative-state families, and explicit post-slice objective-family deferrals.",
    "changed_files": [
      "docs/design/first-slice-event-token-contract-matrix.md",
      "agents/rowan-hale/outbox.json"
    ],
    "blockers": [],
    "proposed_work_items": [
      {
        "title": "Align narrative manifest objective rows with snapshot gate schema fields",
        "owner_role": "backend",
        "milestone": "M0",
        "priority": "medium",
        "description": "Update `objective_step_outcome_contract` in `first-slice-content-key-manifest.json` to serialize the locked objective gate shape (`canonical_objective_key`, `loop_step`, `required_all_canonical_keys`, optional `required_any_canonical_keys`, `compatibility_alias_lookup_keys`) without adding mechanics.",
        "dependencies": [
          "RK-AUTO-BACKLOG-0011-F01"
        ],
        "inputs": [
          "docs/design/first-slice-event-token-contract-matrix.md",
          "backend/src/app/config/seeds/v1/narrative/first-slice-content-key-manifest.json"
        ],
        "acceptance_criteria": [
          "Manifest contains exactly six first-session objective rows in locked `tick/build/train/scout/attack/resolve` order",
          "Each row includes canonical-default keys only for `required_all_canonical_keys` and optional `required_any_canonical_keys`",
          "Compatibility aliases are listed as lookup-only and are excluded from direct default gate evaluation",
          "Negative-state family coverage (`insufficient_resources`, `cooldown`, `invalid_target`, `combat_loss`) remains preserved in objective diagnostics"
        ],
        "validation_commands": [
          "python tools/orchestrator.py status"
        ]
      }
    ]
  }
]
